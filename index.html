<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>Kazƒ± Oyunu</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{margin:0;background:#111;color:white;font-family:Arial;overflow:hidden}
canvas{background:#222;display:none;margin:auto}
#menu{
 position:fixed;inset:0;
 display:flex;flex-direction:column;
 justify-content:center;align-items:center;
}
button{
 font-size:20px;padding:14px 30px;
 margin:10px;border:none;border-radius:10px;
}
#mobileControls{
 position:fixed;bottom:20px;left:50%;
 transform:translateX(-50%);
 display:none;gap:10px;
}
.ctrl{
 width:60px;height:60px;
 border-radius:50%;
 background:#444;color:white;
 font-size:22px;
}
#kazBtn{
 position:fixed;bottom:120px;left:50%;
 transform:translateX(-50%);
 padding:15px 40px;
 font-size:20px;
 display:none;
}
</style>
</head>
<body>

<!-- MEN√ú -->
<div id="menu">
 <h1>Kazƒ± Oyunu</h1>
 <p>Platform se√ß</p>
 <button onclick="start('pc')">üíª PC</button>
 <button onclick="start('mobile')">üì± Mobil</button>
</div>

<canvas id="game" width="400" height="600"></canvas>

<!-- MOBƒ∞L OK TU≈ûLARI -->
<div id="mobileControls">
 <button class="ctrl"
  ontouchstart="keys.up=true"
  ontouchend="keys.up=false">‚¨ÜÔ∏è</button>
 <div style="display:flex;gap:10px">
  <button class="ctrl"
   ontouchstart="keys.left=true"
   ontouchend="keys.left=false">‚¨ÖÔ∏è</button>
  <button class="ctrl"
   ontouchstart="keys.right=true"
   ontouchend="keys.right=false">‚û°Ô∏è</button>
 </div>
 <button class="ctrl"
  ontouchstart="keys.down=true"
  ontouchend="keys.down=false">‚¨áÔ∏è</button>
</div>

<button id="kazBtn">‚õèÔ∏è KAZ</button>

<script>
const canvas=document.getElementById("game");
const ctx=canvas.getContext("2d");
const kazBtn=document.getElementById("kazBtn");

let platform="pc";
let cameraY=0;
let gameState="play";
let activeArtifact=null;

const tile=40;

// Oyuncu
const player={x:180,y:100,s:40,spd:4};

// Eser
const artifacts=[
 {x:160,y:350,damage:0}
];

// Kontroller (basƒ±lƒ± tut ‚Üí seri)
const keys={up:false,down:false,left:false,right:false};
onkeydown=e=>{
 if(e.key==="ArrowUp")keys.up=true;
 if(e.key==="ArrowDown")keys.down=true;
 if(e.key==="ArrowLeft")keys.left=true;
 if(e.key==="ArrowRight")keys.right=true;
};
onkeyup=e=>{
 if(e.key==="ArrowUp")keys.up=false;
 if(e.key==="ArrowDown")keys.down=false;
 if(e.key==="ArrowLeft")keys.left=false;
 if(e.key==="ArrowRight")keys.right=false;
};

// Tutturma barƒ±
let barPos=0;
let barDir=1;

kazBtn.onclick=()=>{
 if(barPos>170 && barPos<230){
  activeArtifact.damage=0; // ye≈üil
 }else if(barPos>120 && barPos<280){
  activeArtifact.damage=1; // sarƒ±
 }else{
  activeArtifact.damage=2; // kƒ±rmƒ±zƒ±
 }
 kazBtn.style.display="none";
 gameState="play";
};

function start(p){
 platform=p;
 document.getElementById("menu").style.display="none";
 canvas.style.display="block";
 if(p==="mobile"){
  document.getElementById("mobileControls").style.display="flex";
 }
 loop();
}

function update(){
 if(gameState==="play"){
  if(keys.up)player.y-=player.spd;
  if(keys.down)player.y+=player.spd;
  if(keys.left)player.x-=player.spd;
  if(keys.right)player.x+=player.spd;

  if(player.y-cameraY>300)cameraY=player.y-300;

  artifacts.forEach(a=>{
   if(
    player.x<a.x+tile &&
    player.x+tile>a.x &&
    player.y<a.y+tile &&
    player.y+tile>a.y &&
    a.damage===0
   ){
    gameState="kaz";
    activeArtifact=a;
    kazBtn.style.display="block";
   }
  });
 }

 if(gameState==="kaz"){
  barPos+=4*barDir;
  if(barPos>300||barPos<0)barDir*=-1;
 }
}

function draw(){
 ctx.clearRect(0,0,400,600);

 // Oyuncu
 ctx.fillStyle="blue";
 ctx.fillRect(player.x,player.y-cameraY,tile,tile);

 // Eser
 artifacts.forEach(a=>{
  ctx.fillStyle=
   a.damage===0?"green":
   a.damage===1?"yellow":"red";
  ctx.fillRect(a.x,a.y-cameraY,tile,tile);
 });

 // Tutturma √ßubuƒüu
 if(gameState==="kaz"){
  ctx.fillStyle="red";
  ctx.fillRect(50,250,300,20);
  ctx.fillStyle="yellow";
  ctx.fillRect(100,250,200,20);
  ctx.fillStyle="green";
  ctx.fillRect(170,250,60,20);

  ctx.fillStyle="white";
  ctx.fillRect(50+barPos,245,5,30);
 }
}

function loop(){
 update();
 draw();
 requestAnimationFrame(loop);
}
</script>

</body>
</html>
